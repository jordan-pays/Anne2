#include <stdio.h>
#include <stdlib.h>

typedef struct Element Element;
Element * Element_new(int value);
typedef struct Stack Stack;
Stack * Stack_new();
void Stack_push(Stack *stk, int nb);
int Stack_pop(Stack *stk, int* res_ptr);
void Stack_print(Stack *stk);

struct Element
{
int data;
Element *next;
};
//La structure de pile donne simplement le premier élément:
struct Stack
{
Element *head;
};

int main(){
  Stack *stack = Stack_new();
  int *i;
  Stack_push(stack, 6);
  Stack_push(stack, 7);
  Stack_push(stack, 8);
  Stack_push( stack, 5 );
  Stack_push( stack, 9 );
  //printf("%d \n", Stack_pop(stack, i));
  Stack_print(stack);
}
//Voici une fonction qui permet de créer un élément:
Element * Element_new(int value)
{
Element * ptr = (Element *) malloc(sizeof(Element));
ptr->data = value;
return ptr;
}
//Et une fonction qui permet de créer une pile:
Stack * Stack_new()
{
Stack * ptr = (Stack *) malloc(sizeof(Stack));
ptr->head = NULL;
return ptr;}



void Stack_push(Stack *stk, int nb){
Element *element = Element_new(nb);
  if (stk->head == NULL) { 
    stk->head=element;
  }else {
      stk->head->next = element; 
      stk->head = stk->head->next;
    }
}

int Stack_pop(Stack *stk, int* res_ptr){
  if(stk->head==NULL){
    return -1;
  }
  *res_ptr = stk->head->data;
  stk->head = stk->head-2;
  return 0;
}

void Stack_print(Stack *stk){
int i;
int *res_ptr;
	while(i!=-1){
	  i=Stack_pop(stk,res_ptr);
	  printf("%d \n",*res_ptr);
	}
} 